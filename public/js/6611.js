"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[6611],{9497:(t,e,a)=>{function s(t,e){for(var a=0;a<e.length;a++){var s=e[a];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}a.d(e,{Z:()=>i});const i=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.url=e.url,this.prefix=e.prefix,this.filters={},this.sort={field:"id",direction:"desc"},this.filters.size=10,this.filters.search="",this.loading=!1,this.page=1,this.content={current_page:1,data:[],total:0,to:0}}var e,a,i;return e=t,(a=[{key:"build",value:function(){var t="".concat(window.location.origin).concat(this.url,"?page=").concat(this.page);for(var e in this.filters)void 0!==this.filters[e]&&(t+="&".concat(e,"=").concat(this.filters[e]));return t+"&sort=".concat(this.sort.field,",").concat(this.sort.direction)}},{key:"fetch",value:function(){this.load(!1)}},{key:"append",value:function(){this.load(!0)}},{key:"load",value:function(t){var e=this;this.openLoader(),this.page=t?this.page+1:1,window.axios.get(this.build()).then((function(a){if(t)return a.data.body[e.prefix].data.forEach((function(t){e.content.data.push(t)})),e.content.to=a.data.body[e.prefix].to,void(e.content.total=a.data.body[e.prefix].total);e.content=a.data.body[e.prefix]})).catch((function(t){})).finally((function(){e.closeLoader()}))}},{key:"openLoader",value:function(){this.loading=!0}},{key:"closeLoader",value:function(){this.loading=!1}}])&&s(e.prototype,a),i&&s(e,i),t}()},1437:(t,e,a)=>{a.d(e,{Z:()=>n});var s=a(9497);const i={name:"timeline-model",props:["url","name","model","id"],components:{},data:function(){return{report:{},loading:!1,showStatistics:!1,data:new s.Z({url:"/admin/portal/audits",prefix:"audits",other:"statistics"}),groups:[]}},methods:{init:function(){this.data.filters.auditable_type=this.model,this.data.filters.auditable_id=this.id,this.data.fetch()}},mounted:function(){this.init()}};const n=(0,a(1900).Z)(i,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{class:["dimmer",t.loading?"active":""]},[a("div",{staticClass:"loader"}),t._v(" "),a("div",{staticClass:"dimmer-content"},[a("div",{staticClass:"row justify-content-center"},[a("div",{staticClass:"col-lg-12"},[a("div",{staticClass:"card"},[a("form",{staticClass:"card-body",on:{submit:function(e){return e.preventDefault(),t.data.fetch()}}},[a("div",{staticClass:"d-flex flex-fill"},[a("div",{staticClass:"mr-1"},[a("select",{directives:[{name:"model",rawName:"v-model",value:t.data.filters.event,expression:"data.filters['event']"}],staticClass:"custom-select",on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.$set(t.data.filters,"event",e.target.multiple?a:a[0])}}},[a("option",{domProps:{value:void 0}},[t._v("Choose Event")]),t._v(" "),a("option",{attrs:{value:"create"}},[t._v("Create")]),t._v(" "),a("option",{attrs:{value:"update"}},[t._v("Update")])])]),t._v(" "),a("div",{staticClass:"d-flex align-items-center mr-1"},[a("div",{staticClass:"app-search flex-fill"},[a("div",[a("div",{staticClass:"input-group"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.data.filters.startDate,expression:"data.filters['startDate']"}],staticClass:"form-control bg-white border",attrs:{type:"date"},domProps:{value:t.data.filters.startDate},on:{input:function(e){e.target.composing||t.$set(t.data.filters,"startDate",e.target.value)}}}),t._v(" "),a("span",{staticClass:"mdi mdi mdi-calendar-arrow-right"}),t._v(" "),a("div",{staticClass:"input-group-append"},[a("button",{class:["btn","btn-primary shadow-none"],attrs:{type:"submit",disabled:""}},[t._v("Start Date")])])])])])]),t._v(" "),a("div",{staticClass:"d-flex align-items-center mr-1"},[a("div",{staticClass:"app-search flex-fill"},[a("div",[a("div",{staticClass:"input-group"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.data.filters.endDate,expression:"data.filters['endDate']"}],staticClass:"form-control bg-white border",attrs:{type:"date"},domProps:{value:t.data.filters.endDate},on:{input:function(e){e.target.composing||t.$set(t.data.filters,"endDate",e.target.value)}}}),t._v(" "),a("span",{staticClass:"mdi mdi mdi-calendar-arrow-right"}),t._v(" "),a("div",{staticClass:"input-group-append"},[a("button",{class:["btn","btn-primary shadow-none"],attrs:{type:"submit",disabled:""}},[t._v("End Date")])])])])])]),t._v(" "),a("div",{staticClass:"d-flex flex-fill "},[a("div",{staticClass:"flex-fill"},[a("div",{staticClass:"app-search"},[a("div",[a("div",{staticClass:"input-group"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.data.filters.search,expression:"data.filters.search"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Search..."},domProps:{value:t.data.filters.search},on:{input:function(e){e.target.composing||t.$set(t.data.filters,"search",e.target.value)}}}),t._v(" "),a("span",{staticClass:"mdi mdi-magnify"}),t._v(" "),a("div",{staticClass:"input-group-append"},[a("button",{class:["btn btn-primary",t.data.loading?"btn-loading":""],attrs:{type:"submit"},on:{click:function(e){return e.preventDefault(),t.data.fetch()}}},[t._v("Search")])])])])])]),t._v(" "),a("div",{staticClass:"ml-1"},[a("button",{class:["btn btn-primary px-3",t.data.loading?"btn-loading":""],on:{click:function(e){return t.data.fetch()}}},[a("i",{staticClass:"mdi mdi-autorenew"})])])])])])])]),t._v(" "),a("div",{staticClass:"col-lg-12"},[a("div",{staticClass:"card"},[a("div",{staticClass:"card-body"},[a("div",{staticClass:"d-flex align-items-center flex-wrap"},[a("div",{staticClass:"h4 m-o"},[t._v("\n                                "+t._s(t.name)+"\n                            ")]),t._v(" "),a("div",{staticClass:"ml-auto mr-3 d-flex align-items-center"},[a("div",{staticClass:"mr-2"},[t._v("Showing")]),t._v(" "),a("div",{staticClass:"form-group mb-0"},[a("select",{directives:[{name:"model",rawName:"v-model",value:t.data.filters.size,expression:"data.filters.size"}],staticClass:"custom-select",on:{change:[function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.$set(t.data.filters,"size",e.target.multiple?a:a[0])},function(e){return t.data.fetch()}]}},[a("option",{attrs:{value:"10"}},[t._v("10")]),t._v(" "),a("option",{attrs:{value:"15"}},[t._v("15")]),t._v(" "),a("option",{attrs:{value:"25"}},[t._v("25")]),t._v(" "),a("option",{attrs:{value:"30"}},[t._v("30")]),t._v(" "),a("option",{attrs:{value:"50"}},[t._v("50")]),t._v(" "),a("option",{attrs:{value:"100"}},[t._v("100")])])])]),t._v(" "),a("div",{staticClass:"mr-3 d-flex align-items-center"},[a("div",{staticClass:"mr-2"},[t._v("Sort By")]),t._v(" "),a("div",{staticClass:"form-group mb-0"},[a("select",{directives:[{name:"model",rawName:"v-model",value:t.data.sort.field,expression:"data.sort.field"}],staticClass:"custom-select",on:{change:[function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.$set(t.data.sort,"field",e.target.multiple?a:a[0])},function(e){return t.data.fetch()}]}},[a("option",{attrs:{value:"id"}},[t._v("ID")]),t._v(" "),t._t("sort-fields")],2)])]),t._v(" "),a("div",{staticClass:"d-flex align-items-center"},[a("div",{staticClass:"form-group mb-0"},[a("select",{directives:[{name:"model",rawName:"v-model",value:t.data.sort.direction,expression:"data.sort.direction"}],staticClass:"custom-select",on:{change:[function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.$set(t.data.sort,"direction",e.target.multiple?a:a[0])},function(e){return t.data.fetch()}]}},[a("option",{attrs:{value:"asc"}},[t._v("Ascending")]),t._v(" "),a("option",{attrs:{value:"desc"}},[t._v("Descending")])])])])])])])]),t._v(" "),a("div",{staticClass:"col-lg-11"},[a("div",{},[a("div",{staticClass:"media d-block d-lg-flex"},[a("div",{staticClass:"media-body"},[a("div",{staticClass:"timeline-group tx-13"},[a("div",{staticClass:"timeline-label py-5"}),t._v(" "),t._l(t.data.content.data,(function(e){return a("div",{key:e.id,staticClass:"timeline-item"},[a("div",{staticClass:"timeline-time"},[a("strong",[t._v(t._s(e.created_at_read)+" "),a("br"),t._v(" "+t._s(e.last_update))])]),t._v(" "),a("div",{staticClass:"timeline-body"},[a("div",{staticClass:"card"},[a("div",{staticClass:"card-body"},[a("div",{staticClass:"h6 mg-b-0 d-flex"},[a("div",[t._v("\n                                                        "+t._s(e.event)+" : "+t._s(e.user?e.user.name+" "+e.user.last_name:"Root System")+" - "+t._s(e.user?e.user.email:"root@steward.co.zw")+" - "),a("span",{staticClass:"text-primary"},[t._v("#"+t._s(e.user?e.user.id:"ROOT"))])])]),t._v(" "),a("h6",{staticClass:"mg-b-0"},[a("span",{staticClass:"text-primary"},[t._v("#"+t._s(e.auditable_id))]),t._v(" "+t._s(e.auditable_type))]),t._v(" "),a("p",{staticClass:"mb-3"},[a("span",{staticClass:"text-muted"},[t._v("IP : ")]),t._v(" "+t._s(e.ip_address)),a("br"),t._v(" "),a("span",{staticClass:"text-muted"},[t._v("User Agent : ")]),t._v(" "+t._s(e.user_agent)),a("br"),t._v(" "),a("span",{staticClass:"text-muted"},[t._v("Url : ")]),t._v(" "),a("span",{staticClass:"text-primary"},[t._v(" "+t._s(e.url)+" ")]),t._v(" "),a("br")]),t._v(" "),Object.entries(e.old_values).length>0||Object.entries(e.new_values).length>0?a("table",{staticClass:"table border-bottom border-right border-left"},[a("thead",[a("tr",[Object.entries(e.old_values).length>0?a("th",{staticClass:"w-50"},[t._v("Old")]):t._e(),t._v(" "),Object.entries(e.new_values).length>0?a("th",{staticClass:"w-50"},[t._v("New")]):t._e()])]),t._v(" "),a("tbody",[a("tr",[Object.entries(e.old_values).length>0?a("td",{},t._l(e.old_values,(function(s,i){return a("div",{key:s+"-"+i+"-"+e.id+"-old-values"},[a("span",{staticClass:"text-muted"},[t._v(t._s(i.replace("_"," "))+" : ")]),t._v(t._s(t._f("string_limit")(s,50)))])})),0):t._e(),t._v(" "),Object.entries(e.new_values).length>0?a("td",{},t._l(e.new_values,(function(s,i){return a("div",{key:s+"-"+i+"-"+e.id+"-new-values"},[a("span",{staticClass:"text-muted"},[t._v(t._s(i.replace("_"," "))+" : ")]),t._v(t._s(t._f("string_limit")(s,50)))])})),0):t._e()])])]):t._e()])])])])})),t._v(" "),a("div",{staticClass:"timeline-label pb-4 pt-4"},[t.data.content.total!==t.data.content.to&&t.data.content.data.length>0?a("button",{class:["btn btn-primary btn-sm",t.data.loading?"btn-loading":""],on:{click:function(e){return t.data.append()}}},[a("i",{staticClass:"mdi mdi-arrow-down mr-1"}),t._v(" Load More\n                                    ")]):t._e()])],2)])])])])])])])}),[],!1,null,null,null).exports},6611:(t,e,a)=>{a.r(e),a.d(e,{default:()=>i});const s={name:"timeline",components:{TimelineModel:a(1437).Z}};const i=(0,a(1900).Z)(s,(function(){var t=this,e=t.$createElement;return(t._self._c||e)("timeline-model",{attrs:{model:"App\\EcocashPayment",id:t.$route.params.id}})}),[],!1,null,"3e1970c3",null).exports}}]);
//# sourceMappingURL=6611.js.map